classDiagram

class Cliente {
  -_nombre: str
  -_apellido: str
  -_email: str
  -_telefono: str
  +obtener_descuento() float
  +convertir_a_texto() str
  +__str__() str
  +__eq__(other) bool
}

class ClienteRegular {
  +obtener_descuento() float
  +convertir_a_texto() str
  +__str__() str
}

class ClientePremium {
  -__rut: str
  -_direccion: str
  +rut: str
  +direccion: str
  +obtener_descuento() float
  +convertir_a_texto() str
  +__str__() str
}

class ClienteCorporativo {
  -empresa: str
  -__rut: str
  -_direccion: str
  +rut: str
  +direccion: str
  +obtener_descuento() float
  +convertir_a_texto() str
  +__str__() str
}

Cliente <|-- ClienteRegular
Cliente <|-- ClientePremium
Cliente <|-- ClienteCorporativo


class GestorClientes {
  -_archivo_txt: str
  -_clientes: list~Cliente~
  -_log: LoggerGIC
  +cargar()
  +guardar()
  +buscar_por_nombre_email(nombre: str, email: str) Cliente
  +es_duplicado(nuevo_cliente: Cliente) bool
  +agregar_cliente(nuevo_cliente: Cliente) bool
  +crear_cliente_interactivo() Cliente
  +listar_clientes()
  +editar_interactivo()
  +eliminar_interactivo() bool
  +pedir_dato(mensaje: str, reglas: tuple) str
}

GestorClientes "1" *-- "0..*" Cliente : contiene


class LoggerGIC {
  +info(msg)
  +warning(msg)
  +error(msg)
}

GestorClientes --> LoggerGIC : usa

class Validadores {
  <<static>>
  +validar_email(email: str) bool
  +validar_telefono(telefono: str) bool
  +validar_campo_no_vacio(texto: str) bool
  +validar_solo_letras(texto: str) bool
  +validar_rut(rut: str) bool
}

Cliente ..> Validadores : valida 

class GICError
class DatoInvalidoError
class ClienteNoEncontradoError

GICError <|-- DatoInvalidoError
GICError <|-- ClienteNoEncontradoError

Cliente ..> DatoInvalidoError : lanza
GestorClientes ..> ClienteNoEncontradoError : lanza

class PersistenciaTXT {
  <<module>>
  +guardar_clientes_txt(clientes: list~Cliente~, ruta: str)
  +cargar_clientes_txt(ruta) list~Cliente~
}

GestorClientes ..> PersistenciaTXT : usa
PersistenciaTXT ..> Cliente : reconstruye